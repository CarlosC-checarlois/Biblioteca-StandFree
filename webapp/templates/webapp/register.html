{% extends "cabezal.html" %}
{% block cargar_static %}
    {% load static %}
{% endblock %}
{% block sobreescribir_jvscript_archivos %}
{% endblock %}
{% block titulo_pagina %}
    <title>Contáctanos - BibliotecaStand</title>
{% endblock %}
{% block contenido_pagina %}
    <main id="page-content">
        <div id="register-container">
            <h2>Crear Cuenta</h2>
            <form id="registerForm" method="POST" action="{% url 'index_register' %}">
                {% csrf_token %}
                <div class="input-group">
                    <label for="nombre">Nombre Completo</label>
                    <input type="text" id="nombre" name="nombre" placeholder="Ingresa tu nombre completo" required>
                </div>
                <div class="input-group">
                    <label for="email">Correo Electrónico</label>
                    <input type="email" id="email" name="email" placeholder="Ingresa tu correo electrónico" required>
                </div>
                <div class="input-group">
                    <label for="usuario">Usuario</label>
                    <input type="text" id="usuario" name="usuario" placeholder="Crea un nombre de usuario" required>
                </div>
                <div class="input-group">
                    <label for="contraseña">Contraseña</label>
                    <input type="password" id="contraseña" name="contraseña" placeholder="Crea una contraseña" required>
                </div>
                <div class="input-group">
                    <label for="confirmar_contraseña">Confirmar Contraseña</label>
                    <input type="password" id="confirmar_contraseña" name="confirmar_contraseña"
                           placeholder="Repite la contraseña" required>
                </div>
                <div id="login-link">
                    <p>¿Ya tienes una cuenta? <a href="{% url 'index_login' %}">Inicia sesión aquí</a></p>
                </div>
                <button type="submit" id="register-button">Registrarse</button>
            </form>

            {% if messages %}
                <div class="mt-3">
                    {% for message in messages %}
                        <div class="alert alert-{{ message.tags }}">{{ message }}</div>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
    </main>
{% endblock %}
{% block jvscript_archivos_defer %}
    <script>
        document.getElementById('registerForm').addEventListener('submit', function (e) {
            e.preventDefault();

            const nombre = document.getElementById('nombre').value;
            const email = document.getElementById('email').value;
            const usuario = document.getElementById('usuario').value;
            const contraseña = document.getElementById('contraseña').value;
            const confirmar_contraseña = document.getElementById('confirmar_contraseña').value;

            // Validar las contraseñas
            if (contraseña !== confirmar_contraseña) {
                alert('Las contraseñas no coinciden.');
                return;
            }

            // Redirigir con los parámetros en la URL
            const url = new URL(window.location.href);
            url.searchParams.set('nombre', nombre);
            url.searchParams.set('email', email);
            url.searchParams.set('usuario', usuario);
            url.searchParams.set('contraseña', contraseña); // Es recomendable no pasar contraseñas en URL, pero para ejemplo funciona
            window.location.href = url.toString();
        });
    </script>
{% endblock %}
